(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{f3GJ:function(t,e,n){"use strict";n.r(e),n.d(e,"AttendanceModule",(function(){return S}));var a=n("fXoL"),r=n("ofXK"),s=n("lh0T"),i=n("WIKx"),d=n("ogxq"),c=n("tyNb"),l=function(t,e,n,a,r,s,i){this.id=t,this.title=e,this.date=n,this.studentId=a,this.active=r,this.createddate=s,this.updateddate=i},o=n("yTNM"),h=n("lDv5"),v=n("pdMw"),u=function(t,e,n,a){var r,s=arguments.length,i=s<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,a);else for(var d=t.length-1;d>=0;d--)(r=t[d])&&(i=(s<3?r(i):s>3?r(e,n,i):r(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},p=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,n,a,r,i){var c=this;this.activatedRoute=t,this.calendarService=e,this.apiService=n,this.router=a,this.registerService=r,this.manageService=i,this.atd=[],this.calendarModel=new s.a,this.attandanceModel=new l,this.attandanceList=[],this.studentAtte=!1,this.eventList=[],this.stdList=[],this.posts=[],this.calendarOptions={initialView:"dayGridMonth",selectable:!0,weekends:!0,editable:!0,plugins:[d.a],selectLongPressDelay:1e3,dateClick:this.handleDateClick.bind(this),events:[],eventColor:"brown"},this.prsnt=[],this.absnt=[],this.activatedRoute.queryParams.subscribe((function(t){c.stdId=t.id,c.role=t.val,c.ref_id=t.value,c.std=t.sel}))}return t.prototype.ngOnInit=function(){this.stdId?(this.studentAtte=!1,this.getStdList()):(this.studentAtte=!0,this.getStudentAttandance())},t.prototype.getStdList=function(){var t=this;this.manageService.getStdList().subscribe((function(e){t.stdList=e,t.stdList.forEach((function(e){e.id==t.stdId&&(t.stdname=e.stdname)}))}))},t.prototype.getStudent=function(){var t=this;this.registerService.getStudentList(this.stdId).subscribe((function(e){t.students=e,t.students.forEach((function(t){t.checked=!1}));for(var n=0;n<t.students.length;n++)t.students[n].index=n+1}))},t.prototype.isSelected=function(t){var e={stuid:t.id,date:this.selected};this.atd.push(e)},t.prototype.isAllSelected=function(t){var e=this;1==t?this.students.forEach((function(t){t.checked=!0;var n={stuid:t.id,date:e.selected};e.atd.push(n)})):(this.students.forEach((function(t){t.checked=!1})),this.atd=[])},t.prototype.handleDateClick=function(t){this.stdId?(this.getStudent(),this.showModal=!0,this.selected=t.dateStr,t.title=this.attandanceModel.title):this.showModal=!1},t.prototype.hidemodal=function(){this.showModal=!1,this.atd=[]},t.prototype.addStudentAttandance=function(){var t=this;this.atd.forEach((function(e){e.title=t.attandanceModel.title})),this.calendarService.saveAttandanceList(this.atd).subscribe((function(e){t.apiService.showNotification("top","right","Attandance Added Successfully.","success"),t.showModal=!1,t.atd=[]}))},t.prototype.getStudentAttandance=function(){var t=this;this.calendarService.getAttandanceList(this.ref_id).subscribe((function(e){t.calendarOptions.events=e,t.attandanceList=e}))},t.prototype.backToStudent=function(){this.router.navigate(["/register"],{queryParams:{id:this.stdId,val:this.role}})},t.prototype.backToRegister=function(){this.router.navigate(["/register"],{queryParams:{val:"Student",qstd:this.std}})},t.ctorParameters=function(){return[{type:c.a},{type:i.a},{type:o.a},{type:c.d},{type:h.a},{type:v.a}]},t=u([Object(a.o)({selector:"app-attendance",template:'<div class="main-content">\r\n    <div class="card" *ngIf="studentAtte">\r\n        <div class="card-header">\r\n            <div class="row">\r\n                <div class="col-auto mr-auto">\r\n                    <button type="cancel" class="btn btn-danger btn-round" (click)="backToRegister()">\r\n                        <i class="fa fa-arrow-left"></i> Back\r\n                    </button>\r\n                </div>\r\n                <div class="col-md-10">\r\n\r\n                    <h4 class="card-title">View Attandance</h4>\r\n                </div>\r\n                \x3c!-- <div class="ml-md-auto">\r\n                   \r\n                </div> --\x3e\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" *ngIf="studentAtte">\r\n        <div class="col-md-12">\r\n            <div class="row">\r\n                <div class="col-md-6">\r\n                    <div class="card card-calendar">\r\n                        <div class="card-content">\r\n                            <full-calendar [options]="calendarOptions" style="color:red;"></full-calendar>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="modal" id="myModal" [style.display]="showModal ? \'block\' : \'none\'">\r\n        <div class="modal-dialog modal-lg">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <div class="row">\r\n                        <div class="col-md-3">\r\n                            <h5 class="model-title">{{stdname}}</h5>\r\n                        </div>\r\n                        <div class="col-md-5">\r\n                            <h5 class="model-title">Selected Date: {{selected}}</h5>\r\n                        </div>\r\n                        <div class="ml-md-auto">\r\n                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"\r\n                                (click)="hidemodal()">\r\n                                <i class="nc-icon nc-simple-remove"> &nbsp;</i>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <div class="instruction">\r\n                        <form class="form-horizontal" name="mainCateRegForm" #mainCateRegForm="ngForm">\r\n                            <div class="card card-plain">\r\n                                <div class="card-header">\r\n                                    <div class="row">\r\n                                        <div class="col-md-6">\r\n                                            <h4 class="card-title">Select Student</h4>\r\n                                        </div>\r\n                                        <div class="col-md-2" style="margin-top: 20px!important;">\r\n                                            <div class="form-check-radio">\r\n                                                <label class="form-check-label">\r\n                                                    <input class="form-check-input" type="radio" name="title"\r\n                                                        id="Present" value="Present"\r\n                                                        [(ngModel)]="attandanceModel.title"> Present\r\n                                                    <span class="form-check-sign"></span>\r\n                                                </label>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="col-md-2" style="margin-top: 20px!important;">\r\n\r\n                                            <div class="form-check-radio">\r\n                                                <label class="form-check-label">\r\n                                                    <input class="form-check-input" type="radio" name="title"\r\n                                                        id="Abscent" value="Abscent"\r\n                                                        [(ngModel)]="attandanceModel.title"> Absent\r\n                                                    <span class="form-check-sign"></span>\r\n                                                </label>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="card-body">\r\n                                    <div class="table-responsive">\r\n                                        <table class="table">\r\n                                            <thead class="text-primary">\r\n                                                <th class="text-left">\r\n                                                    <div class="form-check">\r\n                                                        <label class="form-check-label">\r\n                                                            <input [disabled]="!attandanceModel.title"\r\n                                                                class="form-check-input" [(ngModel)]="isMasterSel"\r\n                                                                name="list_name" value="h1"\r\n                                                                (change)="isAllSelected(isMasterSel)" type="checkbox" />\r\n                                                            <span class="form-check-sign"></span>\r\n                                                        </label>\r\n                                                    </div>\r\n                                                </th>\r\n                                                <th class="text-center">#</th>\r\n                                                <th class="text-center">Name</th>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                <tr\r\n                                                    *ngFor="let item of students | paginate: { itemsPerPage: 5, currentPage: p }">\r\n                                                    <td>\r\n                                                        <div class="form-check">\r\n                                                            <label class="form-check-label">\r\n                                                                <input class="form-check-input"\r\n                                                                    [disabled]="!attandanceModel.title"\r\n                                                                    [(ngModel)]="item.checked" name="list_name"\r\n                                                                    (change)="isSelected(item)" type="checkbox" />\r\n                                                                <span class="form-check-sign"></span>\r\n                                                            </label>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td class="text-center">{{item.index}}</td>\r\n                                                    <td class="text-center">\r\n                                                        {{ item.firstname }} {{ item.middlename }} {{ item.lastname }}\r\n                                                    </td>\r\n                                                </tr>\r\n                                            </tbody>\r\n                                        </table>\r\n                                    </div>\r\n                                </div>\r\n                                <div class="card-footer">\r\n                                    <div class="row">\r\n                                        <div class="ml-md-auto">\r\n                                            <pagination-controls (pageChange)="p = $event" autoHide="true" maxSize="5"\r\n                                                responsive="true"></pagination-controls>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n                <div class="modal-footer justify-content-center">\r\n                    <button type="button" class="btn btn-info btn-round" [disabled]="!attandanceModel.title "\r\n                        data-dismiss="modal" (click)="addStudentAttandance()">\r\n                        <i class="fa fa-paper-plane" aria-hidden="true"></i> Save\r\n                    </button>\r\n                    <button type="button" class="btn btn-secondary btn-round" data-dismiss="modal"\r\n                        (click)="hidemodal()">\r\n                        <i class="fa fa-times" aria-hidden="true"></i> Cancel\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="card" *ngIf="!studentAtte">\r\n        <div class="card-header">\r\n            <div class="row">\r\n                <div class="col-auto mr-auto">\r\n                    <button type="cancel" class="btn btn-danger btn-round" (click)="backToStudent()">\r\n                        <i class="fa fa-arrow-left"></i> Back\r\n                    </button>\r\n                </div>\r\n                <div class="col-md-10">\r\n\r\n                    <h4 class="card-title">Add Attandance</h4>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row" *ngIf="!studentAtte">\r\n        <div class="col-md-12">\r\n            <div class="row">\r\n                <div class="col-md-6">\r\n                    <div class="card card-calendar">\r\n                        <div class="card-content">\r\n                            <full-calendar [options]="calendarOptions"></full-calendar>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',styles:[""]}),p("design:paramtypes",[c.a,i.a,o.a,c.d,h.a,v.a])],t)}(),m=n("3Pt+"),b=[{path:"",children:[{path:"attendance",component:f}]}],g=n("IvIE"),y=n("oOf3"),k=function(t,e,n,a){var r,s=arguments.length,i=s<3?e:null===a?a=Object.getOwnPropertyDescriptor(e,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,a);else for(var d=t.length-1;d>=0;d--)(r=t[d])&&(i=(s<3?r(i):s>3?r(e,n,i):r(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i},S=function(){function t(){}return t=k([Object(a.M)({declarations:[f],imports:[r.c,m.d,g.a,y.a,c.e.forChild(b)]})],t)}()}}]);